/*
 * ================================================================================================
 * ğŸ³ Nextflow Configuration File
 * ã‚³ãƒ³ãƒ†ãƒŠã®è¨­å®šã‚’ã“ã“ã«æ›¸ãã¾ã™
 * ================================================================================================
 */

// ãƒ—ãƒ­ã‚»ã‚¹ã”ã¨ã«ä½¿ã†ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒ‡å®š
process {
    // å…±é€šè¨­å®šï¼šã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚‚ãã®ã‚¿ã‚¹ã‚¯ã ã‘å†è©¦è¡Œã•ã›ã‚‹ãªã©ã®è¨­å®šã‚‚å¯èƒ½
    errorStrategy = 'retry'
    maxRetries = 2

    withName: FASTP {
        // fastpã®å…¬å¼ã‚³ãƒ³ãƒ†ãƒŠ
        container = 'quay.io/biocontainers/fastp:0.23.4--h5f740d0_0'
    }
    withName: STAR_INDEX {
        // STARã®å…¬å¼ã‚³ãƒ³ãƒ†ãƒŠ
        container = 'quay.io/biocontainers/star:2.7.10b--h6b7c446_1'
    }
    withName: STAR_ALIGN {
        // STARã®å…¬å¼ã‚³ãƒ³ãƒ†ãƒŠï¼ˆåŒã˜ã‚‚ã®ã§OKï¼‰
        container = 'quay.io/biocontainers/star:2.7.10b--h6b7c446_1'
    }
    withName: FEATURECOUNTS {
        // Subread (featureCounts) ã®å…¬å¼ã‚³ãƒ³ãƒ†ãƒŠ
        container = 'quay.io/biocontainers/subread:2.0.1--h5bf99c6_1'
    }
}

// ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å®šç¾©ï¼ˆå®Ÿè¡Œæ™‚ã« -profile docker ã®ã‚ˆã†ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ï¼‰
profiles {
    docker {
        docker.enabled = true
        // è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã§å‹•ã‹ã™è¨­å®šï¼ˆPermission Erroré˜²æ­¢ï¼‰
        docker.runOptions = '-u $(id -u):$(id -g)' 
    }
    singularity {
        singularity.enabled = true
        singularity.autoMounts = true
    }
}
